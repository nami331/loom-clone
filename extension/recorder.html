<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>QuickFeedback</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0f0f0f;
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .container {
      text-align: center;
      padding: 40px;
      max-width: 500px;
      width: 100%;
    }

    .logo {
      font-size: 24px;
      font-weight: 700;
      color: #ff4b4b;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .subtitle {
      font-size: 14px;
      color: #666;
      margin-bottom: 48px;
    }

    /* ---- IDLE ---- */
    #idle-section h1 {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 12px;
      line-height: 1.3;
    }

    #idle-section p {
      font-size: 15px;
      color: #888;
      margin-bottom: 36px;
      line-height: 1.6;
    }

    .btn-record {
      background: #ff4b4b;
      color: #fff;
      border: none;
      padding: 16px 40px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
    }

    .btn-record:hover { background: #e03c3c; }
    .btn-record:active { transform: scale(0.97); }

    /* ---- RECORDING ---- */
    #recording-section { display: none; }

    .recording-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 24px;
    }

    .rec-dot {
      width: 12px;
      height: 12px;
      background: #ff4b4b;
      border-radius: 50%;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .rec-label {
      font-size: 14px;
      font-weight: 600;
      color: #ff4b4b;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    #timer {
      font-size: 56px;
      font-weight: 700;
      letter-spacing: 2px;
      margin-bottom: 16px;
      font-variant-numeric: tabular-nums;
    }

    #camera-preview {
      width: 160px;
      height: 120px;
      border-radius: 12px;
      object-fit: cover;
      display: none;
      margin: 0 auto 24px;
      border: 2px solid #333;
    }

    #recording-section p {
      font-size: 14px;
      color: #666;
      margin-bottom: 32px;
      line-height: 1.6;
    }

    .btn-stop {
      background: transparent;
      color: #fff;
      border: 2px solid #444;
      padding: 14px 36px;
      font-size: 15px;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: border-color 0.2s, background 0.2s;
    }

    .btn-stop:hover { border-color: #ff4b4b; color: #ff4b4b; }

    /* ---- UPLOADING ---- */
    #uploading-section { display: none; }

    .spinner {
      width: 48px;
      height: 48px;
      border: 4px solid #333;
      border-top-color: #ff4b4b;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 24px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    #uploading-section p {
      font-size: 16px;
      color: #888;
    }

    /* ---- DONE ---- */
    #done-section { display: none; }

    .done-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    #done-section h2 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    #done-section p {
      font-size: 14px;
      color: #888;
      margin-bottom: 28px;
    }

    .url-box {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    #url-input {
      flex: 1;
      background: #1e1e1e;
      border: 1px solid #333;
      color: #fff;
      padding: 12px 16px;
      border-radius: 10px;
      font-size: 13px;
      outline: none;
    }

    .btn-copy {
      background: #ff4b4b;
      color: #fff;
      border: none;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 600;
      border-radius: 10px;
      cursor: pointer;
      white-space: nowrap;
      transition: background 0.2s;
    }

    .btn-copy:hover { background: #e03c3c; }
    .btn-copy.copied { background: #22c55e; }

    .btn-new {
      background: transparent;
      color: #666;
      border: none;
      font-size: 14px;
      cursor: pointer;
      margin-top: 8px;
      text-decoration: underline;
    }

    .btn-new:hover { color: #fff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">QuickFeedback</div>
    <div class="subtitle">画面を録画してURLでシェア</div>

    <!-- 待機中 -->
    <div id="idle-section">
      <h1>フィードバックを<br>動画で伝えよう</h1>
      <p>画面とカメラを録画して、<br>URLを相手に送るだけ。</p>
      <button class="btn-record" id="start-btn">録画を開始</button>
    </div>

    <!-- 録画中 -->
    <div id="recording-section">
      <div class="recording-indicator">
        <div class="rec-dot"></div>
        <span class="rec-label">録画中</span>
      </div>
      <div id="timer">00:00</div>
      <video id="camera-preview" autoplay muted playsinline></video>
      <p>作業が終わったら<br>このタブに戻って停止ボタンを押してください</p>
      <button class="btn-stop" id="stop-btn">録画を停止</button>
    </div>

    <!-- アップロード中 -->
    <div id="uploading-section">
      <div class="spinner"></div>
      <p>アップロード中...<br>そのままお待ちください</p>
    </div>

    <!-- 完了 -->
    <div id="done-section">
      <div class="done-icon">✅</div>
      <h2>完了！</h2>
      <p>このURLを相手に送ると動画が見られます</p>
      <div class="url-box">
        <input type="text" id="url-input" readonly>
        <button class="btn-copy" id="copy-btn">コピー</button>
      </div>
      <button class="btn-new" id="new-btn">新しく録画する</button>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="recorder.js"></script>
</body>
</html>
