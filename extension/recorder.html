<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>QuickFeedback</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0f0f0f;
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .container {
      text-align: center;
      padding: 40px;
      max-width: 500px;
      width: 100%;
    }

    .logo {
      font-size: 24px;
      font-weight: 700;
      color: #ff4b4b;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .subtitle {
      font-size: 14px;
      color: #666;
      margin-bottom: 48px;
    }

    /* ---- IDLE ---- */
    #idle-section h1 {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 12px;
      line-height: 1.3;
    }

    #idle-section > p {
      font-size: 15px;
      color: #888;
      margin-bottom: 28px;
      line-height: 1.6;
    }

    .toggle-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-bottom: 28px;
    }

    .btn-toggle {
      background: #1e1e1e;
      color: #888;
      border: 2px solid #333;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-toggle.active {
      background: #0d2a0d;
      color: #22c55e;
      border-color: #22c55e;
    }

    .btn-record {
      background: #ff4b4b;
      color: #fff;
      border: none;
      padding: 16px 40px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: background 0.2s, transform 0.1s;
      display: block;
      margin: 0 auto 20px;
    }

    .btn-record:hover { background: #e03c3c; }
    .btn-record:active { transform: scale(0.97); }

    .link-recordings {
      font-size: 13px;
      color: #555;
      cursor: pointer;
      background: none;
      border: none;
      text-decoration: underline;
    }

    .link-recordings:hover { color: #888; }

    /* ---- RECORDING ---- */
    #recording-section { display: none; }

    .recording-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 24px;
    }

    .rec-dot {
      width: 12px;
      height: 12px;
      background: #ff4b4b;
      border-radius: 50%;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .rec-label {
      font-size: 14px;
      font-weight: 600;
      color: #ff4b4b;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    #timer {
      font-size: 56px;
      font-weight: 700;
      letter-spacing: 2px;
      margin-bottom: 16px;
      font-variant-numeric: tabular-nums;
    }

    #camera-preview {
      width: 160px;
      height: 120px;
      border-radius: 12px;
      object-fit: cover;
      display: none;
      margin: 0 auto 24px;
      border: 2px solid #333;
    }

    #recording-section p {
      font-size: 14px;
      color: #666;
      margin-bottom: 32px;
      line-height: 1.6;
    }

    .btn-stop {
      background: transparent;
      color: #fff;
      border: 2px solid #444;
      padding: 14px 36px;
      font-size: 15px;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: border-color 0.2s, color 0.2s;
    }

    .btn-stop:hover { border-color: #ff4b4b; color: #ff4b4b; }

    /* ---- UPLOADING ---- */
    #uploading-section { display: none; }

    .spinner {
      width: 48px;
      height: 48px;
      border: 4px solid #333;
      border-top-color: #ff4b4b;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin: 0 auto 24px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    #uploading-section p {
      font-size: 16px;
      color: #888;
    }

    /* ---- DONE ---- */
    #done-section { display: none; }

    .done-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    #done-section h2 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    #done-section > p {
      font-size: 14px;
      color: #888;
      margin-bottom: 28px;
    }

    .url-box {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }

    #url-input {
      flex: 1;
      background: #1e1e1e;
      border: 1px solid #333;
      color: #fff;
      padding: 12px 16px;
      border-radius: 10px;
      font-size: 13px;
      outline: none;
    }

    .btn-copy {
      background: #ff4b4b;
      color: #fff;
      border: none;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 600;
      border-radius: 10px;
      cursor: pointer;
      white-space: nowrap;
      transition: background 0.2s;
    }

    .btn-copy:hover { background: #e03c3c; }
    .btn-copy.copied { background: #22c55e; }

    .done-actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .btn-new {
      background: transparent;
      color: #666;
      border: none;
      font-size: 14px;
      cursor: pointer;
      text-decoration: underline;
    }

    .btn-new:hover { color: #fff; }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">QuickFeedback</div>
    <div class="subtitle">ç”»é¢ã‚’éŒ²ç”»ã—ã¦URLã§ã‚·ã‚§ã‚¢</div>

    <!-- å¾…æ©Ÿä¸­ -->
    <div id="idle-section">
      <h1>ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’<br>å‹•ç”»ã§ä¼ãˆã‚ˆã†</h1>
      <p>ç”»é¢ã‚’éŒ²ç”»ã—ã¦ã€URLã‚’ç›¸æ‰‹ã«é€ã‚‹ã ã‘ã€‚</p>

      <div class="toggle-buttons">
        <button class="btn-toggle active" id="camera-toggle">ğŸ“· ã‚«ãƒ¡ãƒ© ON</button>
        <button class="btn-toggle active" id="mic-toggle">ğŸ¤ ãƒã‚¤ã‚¯ ON</button>
      </div>

      <button class="btn-record" id="start-btn">éŒ²ç”»ã‚’é–‹å§‹</button>
      <button class="link-recordings" id="list-btn">éŒ²ç”»ä¸€è¦§ã‚’è¦‹ã‚‹</button>
    </div>

    <!-- éŒ²ç”»ä¸­ -->
    <div id="recording-section">
      <div class="recording-indicator">
        <div class="rec-dot"></div>
        <span class="rec-label">éŒ²ç”»ä¸­</span>
      </div>
      <div id="timer">00:00</div>
      <video id="camera-preview" autoplay muted playsinline></video>
      <p>ä½œæ¥­ãŒçµ‚ã‚ã£ãŸã‚‰<br>ã“ã®ã‚¿ãƒ–ã«æˆ»ã£ã¦åœæ­¢ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„</p>
      <button class="btn-stop" id="stop-btn">éŒ²ç”»ã‚’åœæ­¢</button>
    </div>

    <!-- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­ -->
    <div id="uploading-section">
      <div class="spinner"></div>
      <p>ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...<br>ãã®ã¾ã¾ãŠå¾…ã¡ãã ã•ã„</p>
    </div>

    <!-- å®Œäº† -->
    <div id="done-section">
      <div class="done-icon">âœ…</div>
      <h2>å®Œäº†ï¼</h2>
      <p>ã“ã®URLã‚’ç›¸æ‰‹ã«é€ã‚‹ã¨å‹•ç”»ãŒè¦‹ã‚‰ã‚Œã¾ã™</p>
      <div class="url-box">
        <input type="text" id="url-input" readonly>
        <button class="btn-copy" id="copy-btn">ã‚³ãƒ”ãƒ¼</button>
      </div>
      <div class="done-actions">
        <button class="btn-new" id="new-btn">æ–°ã—ãéŒ²ç”»ã™ã‚‹</button>
        <button class="link-recordings" id="list-btn-done">éŒ²ç”»ä¸€è¦§ã‚’è¦‹ã‚‹</button>
      </div>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="recorder.js"></script>
</body>
</html>
